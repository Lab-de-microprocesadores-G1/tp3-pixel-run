/***************************************************************************//**
  @file     general.c
  @brief    General Library
  @author   G. Davidov, F. Farall, J. Gayt√°n, L. Kammann, N. Trozzo
 ******************************************************************************/

/*******************************************************************************
 * INCLUDE HEADER FILES
 ******************************************************************************/

#include "general.h"

#include <stdio.h>
#include <math.h>

/*******************************************************************************
 * CONSTANT AND MACRO DEFINITIONS USING #DEFINE
 ******************************************************************************/

/*******************************************************************************
 * ENUMERATIONS AND STRUCTURES AND TYPEDEFS
 ******************************************************************************/

/*******************************************************************************
 * VARIABLES WITH GLOBAL SCOPE
 ******************************************************************************/

/*******************************************************************************
 * FUNCTION PROTOTYPES FOR PRIVATE FUNCTIONS WITH FILE LEVEL SCOPE
 ******************************************************************************/

/*******************************************************************************
 * ROM CONST VARIABLES WITH FILE LEVEL SCOPE
 ******************************************************************************/

/*******************************************************************************
 * STATIC VARIABLES AND CONST VARIABLES WITH FILE LEVEL SCOPE
 ******************************************************************************/

/*******************************************************************************
 *******************************************************************************
                        GLOBAL FUNCTION DEFINITIONS
 *******************************************************************************
 ******************************************************************************/

uint32_t getNumberLength(uint32_t number)
{
    uint32_t length = 0;
    while (number)
    {
        number /= 10;
        length++;
    }
    return length;
}

uint8_t number2ASCII(uint8_t number)
{
	return '0' + number;
}

uint32_t array2Number(uint8_t *arrayNumber, size_t length)
{
    uint32_t number = 0;
    uint32_t weight = (uint32_t)pow(10, length - 1);
    for (uint8_t arrayIndex = 0; arrayIndex < length; arrayIndex++)
    {
        number += arrayNumber[arrayIndex] * weight;
        weight /= 10;
    }
    return number;
}

void number2Array(uint32_t number, uint8_t *arrayNumber, uint8_t length, uint8_t (*transform)(uint8_t))
{
	uint8_t currentDigit;
	for (uint8_t arrayIndex = 0; arrayIndex < length; arrayIndex++)
	{
		currentDigit = number % 10;
		arrayNumber[length - 1 - arrayIndex] = transform == NULL ? currentDigit : transform(currentDigit);
		number /= 10;
	}
}

/*******************************************************************************
 *******************************************************************************
                        LOCAL FUNCTION DEFINITIONS
 *******************************************************************************
 ******************************************************************************/

/*******************************************************************************
 *******************************************************************************
						            INTERRUPT SERVICE ROUTINES
 *******************************************************************************
 ******************************************************************************/

/******************************************************************************/
